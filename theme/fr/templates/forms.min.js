/**
 * Kiubi API - forms.js
 * 
 * Copyright 2013 Troll d'idees
 */
var createForm=function(b,c){var c=c||$("<form>");var a=null;$.each(b,function(e,g){g.id=(g.name=="captcha"?"captcha":"field_"+e);if(g.type=="fieldset"){a=$("<fieldset>").appendTo(c);$("<legend>").html(this.label).appendTo(a);return}var f=createFormElement(g);var d=$("<label>",{html:g.label+(g.required?"&nbsp;*":""),"for":g.id});if(f===false){return}if(f.attr("type")!="hidden"){d.appendTo(a||c)}g.value&&f.val(g.value);f.appendTo(a||c)});return c};var createFormElement=function(b){switch(b.type){case"text":case"date":case"datetime":case"email":case"hidden":case"lettres":case"password":return $("<input>",{id:b.id,type:b.type,placeholder:b.help,name:b.name,"class":"textfield "+b.type});case"chiffres":return $("<input>",{id:b.id,type:"number",placeholder:b.help,name:b.name,"class":"textfield "+b.type});case"upload":return $("<input>",{id:b.id,type:"file",name:b.name,"class":b.type});case"textarea":return $("<textarea>",{id:b.id,placeholder:b.help,name:b.name});case"select":case"departements":case"regions":case"pays":var a=$("<select>",{id:b.id,name:b.name});$.each(b.options,function(){$("<option>").attr({value:this.value}).html(this.label).appendTo(a)});return a;case"radio":case"civilite":case"checkbox":var a=$("<div>",{id:b.id,"class":b.type});$.each(b.options,function(){var c=$("<input>",{type:(b.type=="civilite"?"radio":b.type),name:b.name,value:this.value});$("<label>").append(c).append(this.label).appendTo(a)});return a;default:return false}};